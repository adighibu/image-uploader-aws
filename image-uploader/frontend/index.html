<!DOCTYPE html>
<html>
<head>
  <title>Image Uploader</title>
</head>
<body>
  <h1>Upload Image</h1>
  <input type="file" id="fileInput">
  <button onclick="uploadFile()">Upload</button>

  <script>
    async function uploadFile() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert('Select a file');

      try {
        // 1. Cere presigned URL de la API Gateway → Lambda
        const res = await fetch(`https://fubjtrc97k.execute-api.eu-central-1.amazonaws.com/Prod/upload?filename=${encodeURIComponent(file.name)}`);
        const data = await res.json();

        // 2. Încarcă fișierul direct în S3 cu presigned URL
        const upload = await fetch(data.uploadURL, {
          method: 'PUT',
          body: file
        });

        if (upload.ok) {
          alert('File uploaded successfully!');
        } else {
          alert('Upload failed');
        }
      } catch (err) {
        console.error(err);
        alert('A apărut o eroare.');
      }
    }
  </script>
</body>
</html>

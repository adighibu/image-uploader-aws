<!DOCTYPE html>
<html>
<head>
  <title>Image Uploader</title>
</head>
<body>
  <h1>Upload Image</h1>
  <input type="file" id="fileInput">
  <button onclick="uploadFile()">Upload</button>

  <script>
    async function uploadFile() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert('Select a file');

      try {
        // citește API_BASE_URL din config.json
        const configRes = await fetch('config.json');
        const config = await configRes.json();

        const res = await fetch(`${config.API_BASE_URL}?filename=${encodeURIComponent(file.name)}`);
        const data = await res.json();

        const upload = await fetch(data.uploadURL, {
          method: 'PUT',
          body: file
        });

        if (upload.ok) alert('File uploaded successfully!');
        else alert('Upload failed');
      } catch (err) {
        console.error(err);
        alert('A apărut o eroare.');
      }
    }
  </script>
</body>
</html>
